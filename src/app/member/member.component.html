<mat-toolbar color="primary">
  <input id="filter" #filter (keyup)="tree.treeModel.filterNodes(filter.value)" placeholder="会員から検索" />
  <button mat-icon-button (click)="tree.treeModel.clearFilter()">
    <mat-icon>clear</mat-icon>
  </button>
</mat-toolbar>
<mat-toolbar *ngIf="change" color="warn">
  <button mat-icon-button (click)="save(tree.treeModel)">
    <mat-icon>save</mat-icon>
  </button>
  <button mat-icon-button (click)="undo()">
    <mat-icon>undo</mat-icon>
  </button>
</mat-toolbar>
<tree-root #tree [focused]="true" [nodes]="nodes" [options]="options">
  <ng-template #treeNodeTemplate let-node="node">
    <span *ngIf="node.data.id === 99">
      <input id="search" autofocus (blur)="clearSearch()" (keyup.enter)="search($event.target.value)" (keyup.esc)="clearSearch()"
        placeholder="全員から検索" />
    </span>
    <span *ngIf="node.data.id !== 99" [class.edit]="node.data.room === room.id">{{ node.data.na }}{{node.data.num}}
    </span>
  </ng-template>
</tree-root>
<div class="menu" *ngIf="contextMenu" [style.left.px]="contextMenu.x" [style.top.px]="contextMenu.y">
  <h4>{{ contextMenu.node.data.na }}</h4>
  <hr>
  <ul>
    <li *ngIf="!(contextMenu.node.data.id > -2)" (click)="cut()"><a>切り取り</a></li>
    <li *ngIf="contextMenu.node.data.id > -2" (click)="paste()"><a [style.opacity]="canPaste() && 1 || 0.3">貼り付け</a></li>
    <li *ngIf="contextMenu.node.parent.data.id ===-1" (click)="OK()"><a>OK</a></li>
    <li *ngIf="contextMenu.node.parent.data.id ===-1" (click)="NG()"><a>NG</a></li>
  </ul>
</div>